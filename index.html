<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser



    //Code to create img element for logo
	var logo = document.createElement("img");
    logo.id = "bigG";
    theBody.appendChild(logo);
    document.getElementById("bigG").src = "https://lh4.ggpht.com/IZPLW1SW3yZTnLeOl4nMqDy7BzB3hSwzusLGE648ydbHJeWU4n8FKGCdsJcIqsoafA=w300";
    //


    //Code to create header
    var header = document.createElement("h1");
    header.id = "theHead";
    theBody.appendChild(header);
    //

    var test = document.getElementsByClassName("mainBlock");
    
    
    //Code to create side menu/initial email count
    var sideWindow = document.createElement("div");
        sideWindow.id = "side";
        theBody.appendChild(sideWindow);
	
	var emailCount = document.createElement("li");
    	emailCount.id = "theCount";
    	
    var counter = window.geemails.length;
    	emailCount.innerHTML = "Inbox " + "(" + counter + ")";
    	sideWindow.appendChild(emailCount);
    
    var menuItems = ["Starred", "Important", "Sent Mail", "Drafts", "Spam"];
    for(var y = 0; y < menuItems.length; y++){
        var theList = document.createElement("li");
        	theList.className = "list";
        	theList.innerHTML = menuItems[y] + " (0)";
        	sideWindow.appendChild(theList);
    	}
    //        

    //Code to create inbox div element
	var inbox = document.createElement("div");
    inbox.id = "theInbox";
    theBody.appendChild(inbox);
    //
    

    //Code for setInterval, newMessage/newCounter function to create new messages
    // setInterval(addEmail, 10000);
    var finalBr = document.createElement("br");
    inbox.appendChild(finalBr);
    
    function addEmail(){
    	var myVar = window.getNewMessage();

    	var newDivBlock = document.createElement("div");
    	newDivBlock.className = "mainBlock";
    	inbox.appendChild(newDivBlock);

    	var newBreak = document.createElement("br");
    	inbox.appendChild(newBreak);

    	var newDateDive = document.createElement("div");
    	newDateDive.className = "theDate";
    	newDateDive.innerHTML = myVar.date;
    	newDivBlock.appendChild(newDateDive);

    	var newSenderDiv = document.createElement("div");
    	newSenderDiv.className = "theSender";
    	newSenderDiv.innerHTML = myVar.sender;
    	newDivBlock.appendChild(newSenderDiv);

    	var newSubjectDiv = document.createElement("div");
    	newSubjectDiv.className = "theSubject";
    	newSubjectDiv.innerHTML = myVar.subject;
    	newDivBlock.appendChild(newSubjectDiv);

    	var newMessDiv = document.createElement("div");
    	newMessDiv.className = "theMessage";
    	newMessDiv.innerHTML = myVar.body;
    	newDivBlock.appendChild(newMessDiv);

    	var newerBreak = document.createElement("br");


    	//create eventListener
    	for(var j = 0; j < test.length; j++){
  		document.getElementsByClassName("mainBlock")[j].addEventListener("click", showEmail);
		}

		//new emails appear at top
		inbox.insertBefore(newDivBlock, inbox.childNodes[0]);
		inbox.insertBefore(newerBreak, inbox.childNodes[0]);

		//new counter
  		counter = counter + 1;
    	emailCount.innerHTML = "Inbox " + "(" + counter + ")";

	}
	//end of setInterval/newMessage/counter code
	


	//Code to create initial inbox messages from geemails array
    for(var i = 0; i<window.geemails.length; i++){

    	var divBlock = document.createElement("div");
    	divBlock.className = "mainBlock";
    	inbox.appendChild(divBlock);
    	// document.getElementsByClassName("mainBlock")[i].addEventListener("click", showEmail);

    	var br = document.createElement("br");
    	inbox.appendChild(br);

    	var dateDiv = document.createElement("div");
    	dateDiv.className = "theDate";
    	dateDiv.innerHTML = window.geemails[i].date;
    	divBlock.appendChild(dateDiv);

  		var senderDiv = document.createElement("div");
  		senderDiv.className = "theSender";
  		senderDiv.innerHTML = window.geemails[i].sender;
  		divBlock.appendChild(senderDiv);
  		

  		var subjectDiv = document.createElement("div");
  		subjectDiv.className = "theSubject";
  		subjectDiv.innerHTML = window.geemails[i].subject;
  		divBlock.appendChild(subjectDiv);
  		

  		var messDiv = document.createElement("div");
  		messDiv.className = "theMessage";
  		messDiv.innerHTML = window.geemails[i].body;
  		divBlock.appendChild(messDiv);
  	}
  	//


  	//Code to create eventListener
  	for(var j = 0; j < test.length; j++){
  		document.getElementsByClassName("mainBlock")[j].addEventListener("click", showEmail);
  	}
  	//


	// console.log(document.getElementsByClassName("mainBlock").length);


	//Code to toggle message display
	function showEmail(){
      	var theEmail = this.querySelectorAll(".theMessage")[0];
      	if(theEmail.style.display === "none"){
      		theEmail.style.display = "block";
      	}else{
      		theEmail.style.display = "none";
      	}
     }

     };
     
    </script>
    <link href="https://fonts.googleapis.com/css?family=Delius|Patrick+Hand+SC|Walter+Turncoat" rel="stylesheet">
	</head>
	<body id="theBody">
		<div class="container" id="main">
			
		</div>
	</body>
</html>