<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser
        // console.log(window.geemails.length);


    var sideWindow = document.createElement("div");
        sideWindow.id = "side";
        theBody.appendChild(sideWindow);

    var emailCount = document.createElement("div");
    	emailCount.id = "theCount";
    	emailCount.innerHTML = "Messages: " + window.geemails.length;
    	sideWindow.appendChild(emailCount);


    for(var i = 0; i<window.geemails.length; i++){
    	

    	var divBlock = document.createElement("div");
    	divBlock.className = "mainBlock";
    	theBody.appendChild(divBlock);
    	document.getElementsByClassName("mainBlock")[i].addEventListener("click", showEmail);

    	var br = document.createElement("br");
    	theBody.appendChild(br);

    	var dateDiv = document.createElement("div");
    	dateDiv.className = "theDate";
    	dateDiv.innerHTML = window.geemails[i].date;
    	divBlock.appendChild(dateDiv);

  		var senderDiv = document.createElement("div");
  		senderDiv.className = "theSender";
  		divBlock.appendChild(senderDiv);
  		senderDiv.innerHTML = window.geemails[i].sender;

  		var subjectDiv = document.createElement("div");
  		subjectDiv.className = "theSubject";
  		senderDiv.appendChild(subjectDiv);
  		subjectDiv.innerHTML = window.geemails[i].subject;

  		var messDiv = document.createElement("div");
  		messDiv.className = "theMessage";
  		senderDiv.appendChild(messDiv);
  		messDiv.innerHTML = window.geemails[i].body;

}


      };
      
     function showEmail(){
      	var theEmail = this.querySelectorAll(".theMessage")[0];
      	if(theEmail.style.display === "none"){
      		theEmail.style.display = "block";
      	}else{
      		theEmail.style.display = "none";
      	}
      }


 	var newVar = setInterval(addEmail, 1000);

    var myVar = window.getNewMessage();

    function addEmail(){
      	window.geemails.unshift(myVar);
      }


    </script>
	</head>
	<body id="theBody">
		<div class="container" id="main">
			Build Me!
		</div>
	</body>
</html>